{"version":3,"file":"index.bundle.js","sources":["../src/helpers.js","../src/components/MigrationApp.js","../src/components/MigrationSearch.js","../src/index.js"],"sourcesContent":["import {Loc} from \"main.core\";\n\n\nexport function getMessage(text) {\n    return Loc.hasMessage(text) ? Loc.getMessage(text) : text;\n}\n\nexport function getResponseErrors(response) {\n    if (response && response.errors) {\n        return response.errors.map(item => item.message).join(', ');\n    }\n    return '';\n}","import {ajax} from \"main.core\";\nimport {getMessage, getResponseErrors} from \"../helpers\";\nimport {MigrationSearch} from \"./MigrationSearch\"\n\nexport const MigrationApp = {\n    components: {\n        MigrationSearch\n    },\n\n    props: {\n        config: {\n            type: String,\n            default: ''\n        },\n    },\n    data() {\n        return {\n            xxx: 123\n\n        };\n    },\n    created() {\n\n        ajax.runAction(\n            'sprint:migration.controller.main.refresh',\n            {data: {payload: this.taskPayload}}\n        ).then((response) => {\n            this.responseError = getResponseErrors(response);\n            return response.data;\n        }).then((task) => {\n            this.taskTitle = task.title;\n\n            task.values.forEach((item) => {\n                this.taskValues[item.id] = item.value;\n            });\n\n            task.fields.forEach((item) => {\n                this.taskFields[item.id] = item;\n                this.toolbar[item.id] = item.title;\n            });\n\n            this.value.forEach((item) => this.addValue(item));\n\n            this.isMounted = true;\n        }).catch((response) => {\n            this.responseError = getResponseErrors(response);\n        });\n\n    },\n    mounted() {\n    },\n    watch: {},\n    methods: {\n        getMessage,\n    },\n    template: `\n      <div>\n        <div class=\"sp-table\">\n          <div class=\"sp-row2\">\n            <div class=\"sp-col sp-col-scroll sp-white\">\n              <MigrationSearch\n                  @change=\"\"\n              />\n              <MigrationList/>\n            </div>\n            <div class=\"sp-col sp-col-scroll\">\n              <MigrationLog/>\n            </div>\n          </div>\n        </div>\n        <div class=\"sp-table\">\n          <div class=\"sp-row2\">\n            <div class=\"sp-col\">\n              <input type=\"button\"\n                     :value=\"getMessage('UP_START')\"\n                     class=\"adm-btn-green\"/>\n              <span\n                  class=\"migration_loading\"\n                  v-text=\"getMessage('LOADING_TEXT')\"\n              />\n            </div>\n            <div class=\"sp-col\">\n              <div id=\"migration_progress\"></div>\n              <div id=\"migration_actions\"></div>\n            </div>\n          </div>\n        </div>\n        <div class=\"sp-separator\"></div>\n      </div>\n    `\n};\n","import {getMessage} from \"../helpers\";\n\nexport const MigrationSearch = {\n    props: {},\n    data() {\n        return {\n            search: '',\n            view: 'actual'\n\n        };\n    },\n    created() {\n    },\n    mounted() {\n    },\n    watch: {},\n    methods: {\n        getMessage,\n    },\n    template: `\n      <div class=\"sp-search\">\n        <input\n            v-model=\"search\"\n            :placeholder=\"getMessage('SEARCH')\"\n            type=\"text\"\n            class=\"adm-input\"\n        />\n        <select\n            v-model=\"view\"\n        >\n          <option value=\"actual\" v-text=\"getMessage('TOGGLE_ACTUAL')\"/>\n          <option value=\"all\" v-text=\"getMessage('TOGGLE_LIST')\"/>\n          <option value=\"new\" v-text=\"getMessage('TOGGLE_NEW')\"/>\n          <option value=\"installed\" v-text=\"getMessage('TOGGLE_INSTALLED')\"/>\n          <option value=\"unknown\" v-text=\"getMessage('TOGGLE_UNKNOWN')\"/>\n          <option value=\"tag\" v-text=\"getMessage('TOGGLE_TAG')\"/>\n          <option value=\"modified\" v-text=\"getMessage('TOGGLE_MODIFIED')\"/>\n          <option value=\"older\" v-text=\"getMessage('TOGGLE_OLDER')\"/>\n        </select>\n        <input\n            :value=\"getMessage('SEARCH')\"\n            type=\"button\"\n            @click=\"$emit('change', {search, view})\"\n        />\n      </div>\n    `\n};\n","import {MigrationApp} from './components/MigrationApp';\nimport {BitrixVue} from \"ui.vue3\";\nimport \"./index.css\";\n\nBX.ready(() => {\n    let $app = BX('sprint_migration_app');\n\n    BitrixVue.createApp(MigrationApp, $app.dataset).mount($app);\n});\n"],"names":["getMessage","text","Loc","hasMessage","getResponseErrors","response","errors","map","item","message","join","MigrationApp","components","MigrationSearch","props","data","search","view","created","mounted","watch","methods","template","config","type","String","default","xxx","ajax","runAction","payload","this","taskPayload","then","_this","responseError","task","taskTitle","title","values","forEach","taskValues","id","value","fields","taskFields","toolbar","addValue","isMounted","BX","ready","$app","BitrixVue","createApp","dataset","mount"],"mappings":"iDAGO,SAASA,EAAWC,GACvB,OAAOC,MAAIC,WAAWF,GAAQC,MAAIF,WAAWC,GAAQA,EAGlD,SAASG,EAAkBC,GAC9B,OAAIA,GAAYA,EAASC,OACdD,EAASC,OAAOC,KAAI,SAAAC,GAAI,OAAIA,EAAKC,WAASC,KAAK,MAEnD,OCPEC,EAAe,CACxBC,WAAY,CACRC,gBCJuB,CAC3BC,MAAO,GACPC,gBACI,MAAO,CACHC,OAAQ,GACRC,KAAM,WAIdC,qBAEAC,qBAEAC,MAAO,GACPC,QAAS,CACLrB,WAAAA,GAEJsB,8hCDVAR,MAAO,CACHS,OAAQ,CACJC,KAAMC,OACNC,QAAS,KAGjBX,gBACI,MAAO,CACHY,IAAK,MAIbT,mBAAU,WAENU,OAAKC,UACD,2CACA,CAACd,KAAM,CAACe,QAASC,KAAKC,eACxBC,MAAK,SAAC5B,GAEJ,OADA6B,EAAKC,cAAgB/B,EAAkBC,GAChCA,EAASU,QACjBkB,MAAK,SAACG,GACLF,EAAKG,UAAYD,EAAKE,MAEtBF,EAAKG,OAAOC,SAAQ,SAAChC,GACjB0B,EAAKO,WAAWjC,EAAKkC,IAAMlC,EAAKmC,SAGpCP,EAAKQ,OAAOJ,SAAQ,SAAChC,GACjB0B,EAAKW,WAAWrC,EAAKkC,IAAMlC,EAC3B0B,EAAKY,QAAQtC,EAAKkC,IAAMlC,EAAK8B,SAGjCJ,EAAKS,MAAMH,SAAQ,SAAChC,GAAI,OAAK0B,EAAKa,SAASvC,MAE3C0B,EAAKc,WAAY,YACZ,SAAC3C,GACN6B,EAAKC,cAAgB/B,EAAkBC,OAI/Cc,qBAEAC,MAAO,GACPC,QAAS,CACLrB,WAAAA,GAEJsB,siCEnDJ2B,GAAGC,OAAM,WACL,IAAIC,EAAOF,GAAG,wBAEdG,YAAUC,UAAU1C,EAAcwC,EAAKG,SAASC,MAAMJ"}